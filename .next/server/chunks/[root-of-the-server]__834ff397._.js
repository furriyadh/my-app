module.exports = {

"[project]/.next-internal/server/app/api/google-ads/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[project]/src/app/api/google-ads/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
// src/app/api/google-ads/route.ts
// @ts-nocheck6
__turbopack_context__.s({
    "GET": (()=>GET),
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@supabase/supabase-js/dist/module/index.js [app-route] (ecmascript) <locals>");
;
;
// ÿ•ŸÜÿ¥ÿßÿ° Supabase client ŸÑŸÑÿÆÿßÿØŸÖ
const supabaseUrl = ("TURBOPACK compile-time value", "https://mkzwqbgcfdzcqmkgzwgy.supabase.co");
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseServiceKey);
async function POST(request) {
    try {
        console.log('üöÄ Next.js API Route: ÿßÿ≥ÿ™ÿØÿπÿßÿ° Google Ads data ŸÖÿ®ÿßÿ¥ÿ±ÿ©...');
        const body = await request.json();
        const { loginCustomerId, startDate, endDate, dataType } = body;
        console.log('üì• Request body:', {
            loginCustomerId,
            startDate,
            endDate,
            dataType
        });
        // Get environment variables
        const refreshToken = process.env.GOOGLE_REFRESH_TOKEN;
        const clientId = process.env.GOOGLE_CLIENT_ID;
        const clientSecret = process.env.GOOGLE_CLIENT_SECRET;
        const developerId = process.env.GOOGLE_DEVELOPER_TOKEN;
        const mccCustomerId = process.env.MCC_LOGIN_CUSTOMER_ID;
        console.log('üîë Environment check:', {
            hasRefreshToken: !!refreshToken,
            hasClientId: !!clientId,
            hasClientSecret: !!clientSecret,
            hasDeveloperToken: !!developerId,
            hasMccCustomerId: !!mccCustomerId
        });
        if (!refreshToken || !clientId || !clientSecret || !developerId) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Missing required environment variables',
                details: {
                    hasRefreshToken: !!refreshToken,
                    hasClientId: !!clientId,
                    hasClientSecret: !!clientSecret,
                    hasDeveloperToken: !!developerId,
                    hasMccCustomerId: !!mccCustomerId
                }
            }, {
                status: 400
            });
        }
        // Get access token
        console.log('üîÑ Getting access token...');
        const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({
                grant_type: 'refresh_token',
                refresh_token: refreshToken,
                client_id: clientId,
                client_secret: clientSecret
            })
        });
        if (!tokenResponse.ok) {
            const tokenError = await tokenResponse.text();
            console.error('‚ùå Token error:', tokenError);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Failed to get access token',
                details: tokenError
            }, {
                status: 400
            });
        }
        const { access_token } = await tokenResponse.json();
        console.log('‚úÖ Access token obtained');
        // Format customer ID (remove dashes)
        const formattedCustomerId = loginCustomerId?.replace(/-/g, '') || '3271710441';
        console.log('üéØ Using customer ID:', formattedCustomerId);
        // Google Ads API query
        const query = `
      SELECT 
        campaign.id,
        campaign.name,
        campaign.status,
      WHERE campaign.status = 'ENABLED' 
      DURING LAST_7_DAYS
    `;
        // Make Google Ads API request
        console.log('üì° Calling Google Ads API...');
        const adsResponse = await fetch(`https://googleads.googleapis.com/v16/customers/${formattedCustomerId}/googleAds:search`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${access_token}`,
                'developer-token': developerId,
                'login-customer-id': mccCustomerId?.replace(/-/g, '') || '',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                query: query.trim()
            })
        });
        console.log('üìä API Response status:', adsResponse.status);
        if (!adsResponse.ok) {
            const errorText = await adsResponse.text();
            console.error('‚ùå Google Ads API error:', errorText);
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Google Ads API failed',
                details: errorText,
                status: adsResponse.status
            }, {
                status: adsResponse.status
            });
        }
        const data = await adsResponse.json();
        console.log('‚úÖ Google Ads API success:', data);
        // Transform data for frontend
        const transformedData = data.map((item)=>{
            const campaign = item.campaign || {};
            const metrics = item.metrics || {};
            return {
                id: campaign.id || 'unknown',
                name: campaign.name || 'Unknown Campaign',
                status: campaign.status || 'UNKNOWN',
                cost: metrics.costMicros ? (parseInt(metrics.costMicros) / 1000000).toFixed(2) : '0.00',
                clicks: metrics.clicks || 0,
                impressions: metrics.impressions || 0
            };
        });
        // Save data to Supabase Database (optional)
        try {
            console.log('üíæ Saving data to Supabase...');
            const { error: saveError } = await supabase.from('google_ads_data').upsert({
                customer_id: formattedCustomerId,
                data: transformedData,
                fetched_at: new Date().toISOString(),
                data_type: dataType || 'campaigns'
            });
            if (saveError) {
                console.error('‚ùå Supabase save error:', saveError);
            } else {
                console.log('‚úÖ Data saved to Supabase');
            }
        } catch (saveError) {
            console.error('‚ùå Supabase save failed:', saveError);
        // Continue even if save fails
        }
        // ÿ•ÿ±ÿ¨ÿßÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑÿπŸÖŸäŸÑ
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            data: transformedData,
            rawData: data,
            message: `Found ${transformedData.length} campaigns`
        });
    } catch (error) {
        console.error('üí• ÿÆÿ∑ÿ£ ŸÅŸä Next.js API Route:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: 'Internal server error',
            message: error.message,
            stack: error.stack
        }, {
            status: 500
        });
    }
}
async function GET(request) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
        message: 'Google Ads API Route is working. Use POST method to fetch data.',
        timestamp: new Date().toISOString()
    });
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__834ff397._.js.map